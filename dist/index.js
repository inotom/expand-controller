/**
 * @inotom/expand-controller v1.0.0 inotom <wdf7322@yahoo.co.jp> | MIT
 */

"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),require("core-js/modules/es.array.slice"),require("core-js/modules/es.regexp.exec"),require("core-js/modules/es.string.split"),require("core-js/modules/web.dom-collections.for-each");var KEY_ENTER=13,KEY_SPACE=32,setAriaExpanded=function(e,t){e.setAttribute("aria-expanded",t)},toggleHandle=function(e){var t=!("true"===e.getAttribute("aria-expanded"));return setAriaExpanded(e,t),t},setPanels=function(e,t){e.forEach((function(e){var r=document.getElementById(e);r&&(toggleAriaHidden(r,t),toggleHeight(r,t))}))},toggleAriaHidden=function(e,t){e.setAttribute("aria-hidden",!t)},toggleHeight=function(e,t){if("false"!==e.dataset.enableHeightStyle){if(!e.dataset.height){var r=e.clientHeight;e.dataset.height=r}var a=t?e.dataset.height+"px":0;e.style.height=a}},expandController=function(){var e=document.querySelectorAll(".js-expand-controller[aria-controls]");Array.prototype.slice.call(e,0).forEach((function(e){var t=e.getAttribute("aria-controls").split(" "),r=function(r){var a;((null===(a=e.dataset.disableEvents)||void 0===a?void 0:a.split(" "))||[]).forEach((function(e){switch(e){case"prevent":r.preventDefault();break;case"stop":r.stopPropagation()}}));var n=toggleHandle(e);setPanels(t,n)};e.addEventListener("click",r),"button"===e.getAttribute("role")&&e.addEventListener("keydown",(function(e){e.keyCode!==KEY_ENTER&&e.keyCode!==KEY_SPACE||r(e)}));var a=e.getAttribute("aria-expanded"),n=null!==a&&"true"===a;setAriaExpanded(e,n),setPanels(t,n)}))};exports.expandController=expandController;
